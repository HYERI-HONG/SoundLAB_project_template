create table BOARD(
    bno INT NOT NULL AUTO_INCREMENT,
    title VARCHAR(200) NOT NULL,
    content TEXT NULL,
    writer VARCHAR(50) NOT NULL,
    regdate TIMESTAMP NOT NULL DEFAULT now(),
    viewcnt INT DEFAULT 0,
    PRIMARY KEY (bno)
);

CREATE SEQUENCE mseq START WITH 1 INCREMENT BY 1;


CREATE TABLE MASTER_SEQ(
	seq INT AUTO_INCREMENT PRIMARY KEY,
	seq_name VARCHAR(20) 
);

INSERT INTO BOARD
( title, content, writer, regdate, viewcnt)
VALUES
('라이언조스','바다의 왕 상어무리 아기상어','Abhaig','2017-08-02',
	(SELECT seq
	FROM MASTER_SEQ)
);
UPDATE MASTER_SEQ
SET seq = seq + 1;





INSERT INTO MASTER_SEQ(
	seq_name
)
VALUES(
	'seq'
);
SELECT seq
FROM MASTER_SEQ;



CREATE SEQUENCE ISEQ
        START WITH 1000
        INCREMENT BY 1;

CREATE TABLE IMAGE(
    IMG_SEQ DECIMAL PRIMARY KEY,
    IMGNAME VARCHAR(20),
    EXTENSION VARCHAR(10),
    USERID VARCHAR(20)
);
INSERT INTO IMAGE(IMG_SEQ,IMGNAME,EXTENSION,USERID)
VALUES(ISEQ.NEXTVAL,'','','');


<!-- ERD -- 테이블 --> 
create table ALBUM(
    ALBUM_SEQ INT PRIMARY KEY,
    ALBUM_TITLE VARCHAR(20) NOT NULL,
    INTRO VARCHAR(200),
    AGENCY_NAME VARCHAR(20),
    RELEASE_DATE VARCHAR(20),
    ALBUM_TYPE VARCHAR(20),
    ARTIST_NAME VARCHAR(20),
    ALBUM_GENRE VARCHAR(20)
);



create table MUSIC_GENRE(
    GENRE_SEQ INT PRIMARY KEY,
    GENRE VARCHAR(20) NOT NULL
);


create table ARTIST(
    ARTIST_SEQ INT PRIMARY KEY,
    ARTIST_NAME VARCHAR(20) NOT NULL,
    SEX VARCHAR(10),
    BIRTH VARCHAR(20),
    DEBUT VARCHAR(20),
    NATION VARCHAR(20),
    GROUP_NAME VARCHAR(20),
    ARTIST_TYPE VARCHAR(20)
);

create table IMG(
    IMG_SEQ INT PRIMARY KEY,
    IMG_NAME VARCHAR(20) NOT NULL,
    EXT VARCHAR(10),
    SEQ INT
);

create table MV(
    MV_SEQ INT PRIMARY KEY,
    MV_TITLE VARCHAR(20) NOT NULL,
    MUSIC_SEQ INT,
    RELEASE_DATE VARCHAR(20)
);

ALTER TABLE MV ADD CONSTRAINT MV_FK_MUSIC_SEQ FOREIGN KEY (MUSIC_SEQ) REFERENCES MUSIC(MUSIC_SEQ);


create table MUSIC(
    MUSIC_SEQ INT PRIMARY KEY,
    MUSIC_TITLE VARCHAR(20) NOT NULL,
    ALBUM_SEQ INT,
    ARTIST_SEQ INT,
    GENRE_SEQ INT,
    LYRICS TEXT,
    PLAYTIME VARCHAR(20),
    RELEASE_DATE VARCHAR(20)
);

ALTER TABLE MUSIC ADD CONSTRAINT MUSIC_FK_ALBUM_SEQ FOREIGN KEY (ALBUM_SEQ) REFERENCES ALBUM(ALBUM_SEQ);
ALTER TABLE MUSIC ADD CONSTRAINT MUSIC_FK_ARTIST_SEQ FOREIGN KEY (ARTIST_SEQ) REFERENCES ARTIST(ARTIST_SEQ);
ALTER TABLE MUSIC ADD CONSTRAINT MUSIC_FK_GENRE_SEQ FOREIGN KEY (GENRE_SEQ) REFERENCES MUSIC_GENRE(GENRE_SEQ);



create table PLAYLIST(
    PL_SEQ INT PRIMARY KEY,
    MEMBER_ID VARCHAR(20) NOT NULL,
    MUSIC_SEQ INT,
    PL_TITLE VARCHAR(20),
    REGI_DATE TIMESTAMP NOT NULL DEFAULT now()
);

ALTER TABLE PLAYLIST ADD CONSTRAINT PLAYLIST_FK_MEMBER_ID FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID);
ALTER TABLE PLAYLIST ADD CONSTRAINT PLAYLIST_FK_MUSIC_SEQ FOREIGN KEY (MUSIC_SEQ) REFERENCES MUSIC(MUSIC_SEQ);



create table VIEW_RECORD(
    VIEW_SEQ INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    MEMBER_ID VARCHAR(20) NOT NULL,
    SEQ_GROUP INT,
    SG_ELEMENT VARCHAR(10),
    VIEW_DATE TIMESTAMP NOT NULL DEFAULT now()
);

ALTER TABLE VIEW_RECORD ADD CONSTRAINT VIEW_RECORD_FK_MEMBER_ID FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID);

create table MEMBER(
    MEMBER_ID VARCHAR(20) PRIMARY KEY,
    PASS VARCHAR(20) NOT NULL,
    NAME VARCHAR(20),
    BIRTH VARCHAR(20),
    PHONE VARCHAR(20),
    NICK VARCHAR(20),
    SEX VARCHAR(20),
    E_MAIL VARCHAR(30)
);

create table UPDOWN(
    LIKE_SEQ INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    MEMBER_ID VARCHAR(20) NOT NULL,
    SEQ_GROUP INT,
    SG_ELEMENT VARCHAR(10),
    TYPES VARCHAR(10)
);

ALTER TABLE UPDOWN ADD CONSTRAINT UPDOWN_FK_MEMBER_ID FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID);

create table KAKAO(
    MEMBER_ID VARCHAR(20) PRIMARY KEY,
    KAKAO_ID VARCHAR(20) NOT NULL,
    KAKAO_PASS VARCHAR(20) NOT NULL
);

ALTER TABLE KAKAO ADD CONSTRAINT KAKAO_FK_MEMBER_ID FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID);

create table ARTICLE(
    ARTICLE_SEQ INT PRIMARY KEY,
    MEMBER_ID VARCHAR(20) NOT NULL,
    BOARD_SEQ INT,
    TITLE VARCHAR(50),
    CONTENTS TEXT,
    PLAYTIME VARCHAR(20),
    REGI_DATE TIMESTAMP NOT NULL DEFAULT now(),
    VIEW_CNT INT DEFAULT 0
);

ALTER TABLE ARTICLE ADD CONSTRAINT ARTICLE_FK_MEMBER_ID FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID);
ALTER TABLE ARTICLE ADD CONSTRAINT ARTICLE_FK_BOARD_SEQ FOREIGN KEY (BOARD_SEQ) REFERENCES BOARD(BOARD_SEQ);

create table BOARD(
    BOARD_SEQ INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    BOARD_NAME VARCHAR(20) NOT NULL
);